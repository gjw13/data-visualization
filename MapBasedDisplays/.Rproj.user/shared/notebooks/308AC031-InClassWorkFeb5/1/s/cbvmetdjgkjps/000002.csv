"0","# import geospatial data about Police Service Areas"
"0","psas <- readOGR(""Police_Service_Areas.shp"",layer=""Police_Service_Areas"")"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","/Users/gjwills/Documents/Georgetown/Senior_Spring/Data_Viz/MapBasedDisplays/Police_Service_Areas.shp"
"1",""", layer: """
"1","Police_Service_Areas"
"1",""""
"1","
"
"1","with"
"1"," "
"1","56"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","24"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID DISTRICT PSA TOTALPOP WHITE BLACK NAT_AMER ASIAN OTHER TWO_ORMORE HISPANIC POPMALE POPFEMALE POPUNDER18 POP65UP"
"1"," "
"1","
"
"0","# extracting the lat/long coordinates of PSA boundary points"
"0","# telling the tidy function that the region value can be found in the ""PSA"" variable"
"0","psas.points <- tidy(psas, region=""PSA"")"
"2","Unequal factor levels: coercing to character"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"2","binding character and factor vector, coercing into character vector"
"0","# combine lat/long coordinates of district boundary points with data about districts"
"0","# tell join function that ""id"" in psas.points corresponds to ""PSA"" in psas@data"
"0","psas.cart <- full_join(psas.points, psas@data, by=c(""id"" = ""PSA""))"
"2","Column `id`/`PSA` joining character vector and factor, coercing into character vector"
"0","plot_data <- filter(sf_data,!is.na(PSA))"
"0","all_cats <- expand(plot_data,PSA,Gender)"
"0","plot_data <- summarize(group_by(plot_data,PSA,Gender),reports=n())"
"0","plot_data <- full_join(plot_data,all_cats,by=c(""PSA"",""Gender""))"
"0","plot_data <- mutate(plot_data,reports=replace_na(reports,0))"
"0","names(plot_data)[1] <- ""NAME"""
"0","mapdata <- full_join(plot_data,psas.cart,by=""NAME"")"
"0","g <- ggplot() +"
"0","  geom_polygon(data=drop_na(mapdata), aes(x=long, y=lat, group=group,fill=reports),color=""black"") +"
"0","  coord_map()+"
"0","  theme_void()"
"0","g+facet_wrap(~Gender)+"
"0","  scale_fill_distiller(palette=""Spectral"", name=""Number of Reports"")"
